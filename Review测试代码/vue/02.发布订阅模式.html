<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>02.发布订阅模式</title>
</head>
<body>
    <script>
        //发布订阅模式：三个对象，发布者--主题--订阅者
        
        //发布者(工作内容：在某一时刻给主题对象发布消息，所有订阅了这个主题的订阅者执行逻辑)
        const pub={
            publish:function(){
                dep.notify()
            }
        }

        //主题对象(工作内容：负责调用全部订阅了这个主题的订阅者的方法)
        function Dep(){
            this.subs = [sub1,sub2,sub3]
        }
        Dep.prototype.notify=function(){
            this.subs.forEach(item=>{
                item.update()
            })
        }

        //订阅者(工作内容：负责处理自身的业务逻辑)
        let sub1 = {update:function(){console.log(1)}}
        let sub2 = {update:function(){console.log(2)}}
        let sub3 = {update:function(){console.log(3)}}

        var dep = new Dep()
        pub.publish()

    </script>
</body>
</html>